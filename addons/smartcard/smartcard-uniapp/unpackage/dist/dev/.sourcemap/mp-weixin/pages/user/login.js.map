{"version":3,"sources":["uni-app:///main.js","webpack:////Users/qiujianjun/code/wechat-card/addons/smartcard/smartcard-uniapp/pages/user/login.vue?262b","webpack:////Users/qiujianjun/code/wechat-card/addons/smartcard/smartcard-uniapp/pages/user/login.vue?f0a4","webpack:////Users/qiujianjun/code/wechat-card/addons/smartcard/smartcard-uniapp/pages/user/login.vue?9cf1","webpack:////Users/qiujianjun/code/wechat-card/addons/smartcard/smartcard-uniapp/pages/user/login.vue?66fb","uni-app:///pages/user/login.vue","webpack:////Users/qiujianjun/code/wechat-card/addons/smartcard/smartcard-uniapp/pages/user/login.vue?1123","webpack:////Users/qiujianjun/code/wechat-card/addons/smartcard/smartcard-uniapp/pages/user/login.vue?bfc3"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","data","loading","user","username","password","class_id","ismobile","group_id","code","baseLogo","title","color","mounted","_this","onLoad","onShow","console","methods","wxLogin","uni","success","fail","wechatLogin","changMobileLogin","register","login","icon","account","duration","onGotUserInfo","withCredentials","platform","encrypted_data","iv","raw_data","signature","url","showCancel","content","onGetUserProfile","desc"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACa;;;AAGjE;AACsN;AACtN,gBAAgB,iNAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAi2B,CAAgB,myBAAG,EAAC,C;;;;;;;;;;;;;;;;;;ACsEr3B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AADA;AAAA,eAEA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;EACA;EACAC;IACA;EACA;EACAC;IACA;IACAC;IACA,8EAEA;MACA;IACA;IAEA;EAuBA;EACAC;IACAC;MAAA;MACAC;QACAC;UACA;UACAJ;QACA;QACAK;UACAL;QACA;MACA;IACA;IACA;IACAM;MACAT;IACA;IACA;IACAU;MACAV;IAEA;IACAW;MACA;IACA;IACAC;MACAZ;MACA;QACAM;UACAO;UACAhB;QACA;QACAG;QACA;MACA;MACA;QACAM;UACAO;UACAhB;QACA;QACAG;QACA;MACA;MACAA,iBACA;QACAc;QACAvB;MACA,GACA;QACA;QACA;UACAS;UACA;UACAA;YACAA;UACA;UACA;YACAA;YACAA;YACAA;YACAA;YACAA;UACA;QAGA;UACAA;UACAM;YACAS;YACAF;YACAhB;UACA;QACA;MAEA,EACA;IACA;IACA;IACAmB;MAAA;MACA;MACA;MACAV;QACAC;UACAD;UACAH;UACA;YACAG;cACAW;cACAV;gBACAJ;gBACAH,iBACA;kBACAL;kBACAuB;kBACAC;kBACAC;kBACAC;kBACAC;gBACA,GACA;kBACAnB;kBACA;kBACA;kBACA;oBACA;oBACA;sBACA;sBACA;sBACA;sBACA;oBACA;sBACAA;oBACA;oBACA;oBACA;sBACAG;wBACAiB;sBACA;oBACA;sBACAjB;wBACAiB;sBACA;oBACA;kBAEA;gBACA,EACA;cACA;cACAf;gBACA;kBACAF;oBACAT;oBACA2B;oBACAC;oBACAlB;sBACA;wBACAJ;sBACA;oBACA;kBACA;gBACA;cAEA;YACA;UACA;QACA;MACA;IACA;IACA;IACA;IACAuB;MAAA;MACA;MACA;MACA;MACA;MACA;MACA;MACApB;QACAqB;QAAA;QACApB;UACAJ;UACAH,iBACA;YACAL;YACAuB;YACAC;YACAC;YACAC;YACAC;UACA,GACA;YACAnB;YACA;YACA;YACA;cACA;cACA;gBACA;gBACA;gBACA;gBACA;cACA;gBACAA;cACA;cACAG;gBACAiB;cACA;YAEA;cACAvB;YACA;UACA,EACA;QACA;QACAQ;UACAL;UACAH;UACAM;UACA;YACAA;cACAT;cACA2B;cACAC;cACAlB;gBACA;kBACAJ;kBACAG;gBACA;cACA;YACA;UACA;QAEA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;;MAEA;MACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;AC/VA;AAAA;AAAA;AAAA;AAA0tC,CAAgB,gmCAAG,EAAC,C;;;;;;;;;;;ACA9uC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/user/login.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/user/login.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./login.vue?vue&type=template&id=802e0a44&\"\nvar renderjs\nimport script from \"./login.vue?vue&type=script&lang=js&\"\nexport * from \"./login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./login.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/user/login.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=template&id=802e0a44&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"content\">\r\n\t  <!-- <cu-custom bgColor=\"bg-blue\" :isBack=\"true\"><block slot=\"backText\">返回</block><block slot=\"content\">登录</block></cu-custom> -->\r\n\t\t<block v-if=\"ismobile\">\r\n\t\t\t<view class=\"\">\r\n\t\t\t\t<view class=\"login-card\">\r\n\t\t\t\t\t<view class=\"login-head\">{{title}}</view>\r\n\t\t\t\t\t<view class=\"login-input login-margin-b\">\r\n\t\t\t\t\t\t<input type=\"number\" v-model=\"username\" placeholder=\"请输入手机号\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"login-input\">\r\n\t\t\t\t\t\t<input type=\"number\" :password=\"true\" v-model=\"password\" placeholder=\"请输入密码(6-16位)\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"margin-top flex justify-center\">\r\n\t\t\t\t\t\t<button class=\"cu-btn bg-blue shadow-blur round\" :loading=\"loading\"   @tap=\"login\"  :style=\"{background:color}\">{{ loading ? \"登录中...\":\"手机登录\"}}</button>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"flex justify-center\">\r\n\t\t\t\t\t\t<view class=\"text-gray text-sm margin-top-xl\" :style=\"{color:color}\" @tap=\"wechatLogin\">微信登录</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</block>\r\n\t\t<block v-else>\r\n\t\t\t<!--  #ifndef  MP-WEIXIN\t -->\r\n\t\t\t<view class=\"login-bg\">\r\n\t\t\t\t<view class=\"login-card\">\r\n\t\t\t\t\t<view class=\"login-head\">{{title}}</view>\r\n\t\t\t\t\t<view class=\"login-input login-margin-b\">\r\n\t\t\t\t\t\t<input type=\"number\" v-model=\"username\" placeholder=\"请输入手机号\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"login-input\">\r\n\t\t\t\t\t\t<input type=\"number\" :password=\"true\" v-model=\"password\" placeholder=\"请输入密码(6-16位)\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"cu-bar btn-group margin-top\">\r\n\t\t\t\t\t\t<button class=\"cu-btn bg-blue shadow-blur round\" :loading=\"loading\"   @tap=\"login\"  :style=\"{background:color}\">{{ loading ? \"登录中...\":\"登 录\"}}</button>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"flex justify-center\">\r\n\t\t\t\t\t\t<view class=\"text-gray text-sm margin-top-xl\" :style=\"{color:color}\" @tap=\"register\">注册新账户</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!--  #endif -->\r\n\t\t\t\r\n\t\t\t<!--  #ifdef  MP-WEIXIN\t -->\r\n\t\t\t<view class=\"logView\">\r\n\t\t\t\t<button  @click=\"onGetUserProfile\" class=\"logbt\">\r\n\t\t\t\t\t<view class=\"login-head\">{{title}}</view>\r\n\t\t\t\t\t<view class=\"loginTitile\"><text decode=\"true\">\r\n\t\t\t\t\t请点击微信登录，并授权获取公开信息，\r\n\t\t\t\t\t登录后您将获得更多权益</text></view>\r\n\t\t\t\t\t<view class=\"cu-btn bg-blue shadow-blur round\" :style=\"{background:color}\"><text class=\"cuIcon-lightauto\"></text>微信登录</view>\r\n\t\t\t\t\t\r\n\t\t\t\t</button>\r\n\t\t\t\t<view class=\"text-gray text-sm margin-top-xl\"  :style=\"{color:color}\"  @click=\"changMobileLogin()\">手机登录</view>\r\n\t\t\t\t<!-- <button open-type=\"getUserInfo\" @getuserinfo=\"onGotUserInfo\" class=\"logbt\">\r\n\t\t\t\t\t<image class=\"logoimg\" src=\"../../static/images/user.png\"></image>\r\n\t\t\t\t\t<view class=\"loginTitile\"><text decode=\"true\">\r\n\t\t\t\t\t请点击微信登录，并授权获取公开信息，\r\n\t\t\t\t\t登录士卓曼后您将获得更多权益</text></view>\r\n\t\t\t\t\t<view class=\"loginBtn\">微信登录</view>\r\n\t\t\t\t</button> -->\r\n\t\t\t   <view class=\"text-gray text-sm margin-top-xl\" :style=\"{color:color}\" @tap=\"register\">注册新账户</view>\r\n\t\t\t</view>\r\n\t\t\t<!--  #endif -->\r\n\t\t</block>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\tvar _this;\r\n\timport {baseLogo,cdnUrl,title} from '../../config/config.js';\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tloading: false,\r\n\t\t\t\tuser:[],\r\n\t\t\t\tusername: \"\",\r\n\t\t\t\tpassword: \"\",\r\n\t\t\t\tclass_id:'',\r\n\t\t\t\tismobile:false,\r\n\t\t\t\tgroup_id:1,\r\n\t\t\t\tcode:'',\r\n\t\t\t\tbaseLogo:baseLogo,\r\n\t\t\t\ttitle:title,\r\n\t\t\t\tcolor:''\r\n\t\t\t};\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\t_this = this;\r\n\t\t},\r\n\t\tonLoad(e) {\r\n\t\t\tthis.color=uni.getStorageSync('color')\r\n\t\t},\r\n\t\tonShow() {\r\n\t\t\tthis.user = this.$common.userInfo();\r\n\t\t\tconsole.log(\"this.user: \",this.user);\r\n\t\t\tif (typeof(this.user)== \"undefined\" || this.user=='' ||  this.user==null) {\r\n\t\t\t\t\r\n\t\t\t}else{\r\n\t\t\t\tthis.$common.navigateTo('index');\r\n\t\t\t}\r\n\t\t\t// #ifdef MP-WEIXIN\r\n\t\t\tthis.wxLogin();\r\n\t\t\t// #endif\r\n\t\t\t// #ifdef H5\r\n\t\t\tvar ua = navigator.userAgent.toLowerCase();\r\n\t\t\tvar isWeixin = ua.indexOf('micromessenger') != -1;\r\n\t\t\tif (isWeixin) {\r\n\t\t\t\tvar jweixin = require('jweixin-module')  \r\n\t\t\t\tjweixin.ready(function(){  \r\n\t\t\t\t   console.log(\"123: \",123);\r\n\t\t\t\t   this.wxLogin();\r\n\t\t\t\t});\r\n\t\t\t\tlet oUrl = window.location.href;\r\n\t\t\t\twindow.location = 'https://open.weixin.qq.com/connect/oauth2/authorize?appid=' + store.state.init.initData.wechat.appid +\r\n\t\t\t\t\t`&redirect_uri=${API_URL}user/wxOfficialAccountLogin&response_type=code&scope=snsapi_userinfo&state=` +\r\n\t\t\t\t\toUrl;\r\n\t\t\t\t//window.location.href =cdnUrl+'/third/connect/wechat';  // 自己的appid\r\n\t\t\t\t\r\n\t\t\t\t// 也可以跳转到自己写的错误页面\r\n\t\t\t\t// uni.reLaunch({\r\n\t\t\t\t// \turl:'/pages/address/address'\r\n\t\t\t\t// })\r\n\t\t\t}\r\n\t\t\t// #endif\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\twxLogin(){\r\n\t\t\t\tuni.login({\r\n\t\t\t\t    success:(res) => {\r\n\t\t\t\t        this.code = res.code;\r\n\t\t\t\t\t\tconsole.log(\"res.code: \",res.code);\r\n\t\t\t\t    },\r\n\t\t\t\t\tfail: function (error) {\r\n\t\t\t\t\t        console.log('login failed ' + error);\r\n\t\t\t\t\t      }\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//切换微信登录\r\n\t\t\twechatLogin(){\r\n\t\t\t\t_this.ismobile=false;\r\n\t\t\t},\r\n\t\t\t//切换手机登录\r\n\t\t\tchangMobileLogin(){\r\n\t\t\t\t_this.ismobile=true;\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tregister(){\r\n\t\t\t\tthis.$common.navigateTo('register');\r\n\t\t\t},\r\n\t\t\tlogin() {\r\n\t\t\t\t_this.loading = true;\r\n\t\t\t\tif (_this.username == '' || _this.username.length<11) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\ttitle: '请输入正确的手机号'\r\n\t\t\t\t\t});\r\n\t\t\t\t\t_this.loading = false;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (_this.password == '') {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\ttitle: '请输入密码'\r\n\t\t\t\t\t});\r\n\t\t\t\t\t_this.loading = false;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t_this.$api.login(\r\n\t\t\t\t\t {\r\n\t\t\t\t\t\taccount: _this.username,\r\n\t\t\t\t\t\tpassword: _this.password,\r\n\t\t\t\t\t },\r\n\t\t\t\t\tdata => {\r\n\t\t\t\t\t\t//console.log(data);\r\n\t\t\t\t\t\tif (data.code == 1) {\r\n\t\t\t\t\t\t\t_this.loading = false;\r\n\t\t\t\t\t\t\t//console.log(data);\r\n\t\t\t\t\t\t\t_this.$common.successToShow(data.msg,function(){\r\n\t\t\t\t\t\t\t\t_this.$common.navigateTo('../index/index');\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t_this.$db.set('upload', 1)\r\n\t\t\t\t\t\t\t\t_this.$db.set('login', 1)\r\n\t\t\t\t\t\t\t\t_this.$db.set('token', data.data.userinfo.token)\r\n\t\t\t\t\t\t\t\t_this.$db.set('user', data.data.userinfo)\t\r\n\t\t\t\t\t\t\t\t_this.$db.set('auth', data.data.auth)\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t} catch (e) {}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t_this.loading = false;\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\tduration: 1500,\r\n\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t\ttitle: data.msg\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t)\r\n\t\t\t},\r\n\t\t\t//小程序登录（微信登录）\r\n\t\t\tonGotUserInfo() {\r\n\t\t\t\tthis.$common.errorToShow('正在登录中...');\r\n\t\t\t\tvar platform='wechat';\r\n\t\t\t\tuni.login({\r\n\t\t\t\t\tsuccess: loginRes => {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tconsole.log('第一次登录'+loginRes.code)\r\n\t\t\t\t\t\tif (loginRes.code) {\r\n\t\t\t\t\t\t\tuni.getUserInfo({\r\n\t\t\t\t\t\t\t\twithCredentials: true,\r\n\t\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\t\tconsole.log('用户信息'+loginRes.code+res.encryptedData+res.iv+res.rawData+res.signature)\r\n\t\t\t\t\t\t\t\t\t_this.$api.third(\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tcode: loginRes.code,\r\n\t\t\t\t\t\t\t\t\t\t\tplatform:platform,\r\n\t\t\t\t\t\t\t\t\t\t\tencrypted_data: res.encryptedData,\r\n\t\t\t\t\t\t\t\t\t\t\tiv: res.iv,\r\n\t\t\t\t\t\t\t\t\t\t\traw_data: res.rawData,\r\n\t\t\t\t\t\t\t\t\t\t\tsignature: res.signature\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\tdata => {\r\n\t\t\t\t\t\t\t\t\t\t\tconsole.log(data);\r\n\t\t\t\t\t\t\t\t\t\t\t//console.log(data.data.userinfo) \r\n\t\t\t\t\t\t\t\t\t\t\tvar res=data.data;\r\n\t\t\t\t\t\t\t\t\t\t\tif (data.code == 1) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tthis.$common.successToShow('登录成功!');\r\n\t\t\t\t\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.$db.set('upload',1)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.$db.set('login', 1)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.$db.set('auth',res.auth)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tthis.$db.set('user', res.userinfo)\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log(\"e: \",e);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t//扫码进来的，如果是员工认证，group_id=2，如果是认证普通用户group=1\r\n\t\t\t\t\t\t\t\t\t\t\t\tif(data.data.userinfo.group_id==0){\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\turl: '../user/index?group_id='+_this.group_id\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tuni.switchTab({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\turl: '../index/index'\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfail: (res) => {\r\n\t\t\t\t\t\t\t\t\tif (res.errMsg == \"getUserInfo:cancel\" || res.errMsg == \"getUserInfo:fail auth deny\") {\r\n\t\t\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\t\t\ttitle: '用户授权失败',\r\n\t\t\t\t\t\t\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\t\t\t\t\t\t\tcontent: '请点击重新授权，如果未弹出授权，请尝试长按删除小程序，重新进入!',\r\n\t\t\t\t\t\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconsole.log('用户点击确定')\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//改版后小程序登录规则\r\n\t\t\t//小程序登录\r\n\t\t\tonGetUserProfile() {\r\n\t\t\t\t// uni.showLoading({\r\n\t\t\t\t// \ttitle:\"正在登录中...\"\r\n\t\t\t\t// })\r\n\t\t\t\tvar platform='wechat';\r\n\t\t\t\tvar that=this;\r\n\t\t\t\tvar fid=uni.getStorageSync('parentid')?uni.getStorageSync('parentid'):''; \r\n\t\t\t\tuni.getUserProfile({\r\n\t\t\t\t\t desc: '用于完善会员资料', // 声明获取用户个人信息后的用途，后续会展示在弹窗中，请谨慎填写\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\t_this.$api.third(\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tcode: _this.code,\r\n\t\t\t\t\t\t\t\tplatform:platform,\r\n\t\t\t\t\t\t\t\tencrypted_data: res.encryptedData,\r\n\t\t\t\t\t\t\t\tiv: res.iv,\r\n\t\t\t\t\t\t\t\traw_data: res.rawData,\r\n\t\t\t\t\t\t\t\tsignature: res.signature\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tdata => {\r\n\t\t\t\t\t\t\t\tconsole.log(data);\r\n\t\t\t\t\t\t\t\t//console.log(data.data.userinfo) \r\n\t\t\t\t\t\t\t\tvar res=data.data;\r\n\t\t\t\t\t\t\t\tif (data.code == 1) {\r\n\t\t\t\t\t\t\t\t\tthis.$common.successToShow('登录成功!');\r\n\t\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\t\tthis.$db.set('upload',1)\r\n\t\t\t\t\t\t\t\t\t\tthis.$db.set('login', 1)\r\n\t\t\t\t\t\t\t\t\t\tthis.$db.set('auth',res.auth)\r\n\t\t\t\t\t\t\t\t\t\tthis.$db.set('user', res.userinfo)\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\t\t\t\tconsole.log(\"e: \",e);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\t\t\turl: '../index/index'\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\t\t_this.wxLogin();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: (res) => {\r\n\t\t\t\t\t\tconsole.log(\"res: \",res);\r\n\t\t\t\t\t\t_this.wxLogin();//重新获取登录code\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\tif (res.errMsg == \"getUserInfo:cancel\" || res.errMsg == \"getUserInfo:fail auth deny\") {\r\n\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\ttitle: '用户授权失败',\r\n\t\t\t\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\t\t\t\tcontent: '请点击重新授权，如果未弹出授权，请尝试长按删除小程序，重新进入!',\r\n\t\t\t\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t\t\t\tconsole.log('用户点击确定')\r\n\t\t\t\t\t\t\t\t\t\tuni.navigateBack()\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t// uni.login({\r\n\t\t\t\t// \tsuccess: loginRes => {\r\n\t\t\t\t// \t\tuni.hideLoading();\r\n\t\t\t\t// \t\tconsole.log('第一次登录'+loginRes.code)\r\n\t\t\t\t// \t\tif (loginRes.code && loginRes.code!='') {\r\n\t\t\t\t// \t\t\tconsole.log('2222222222222222222')\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t// \t\t}\r\n\t\t\t\t// \t}\r\n\t\t\t\t// })\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\tpage{ background: #fff;}\r\n\t.content{ height: 100%;}\r\n\t.logView{\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content:center ;\r\n\t\tflex-direction:column;\r\n\t\talign-items: center;     /* 垂直居中 */\r\n\t\t width: 100%;\r\n\t\t position: fixed;\r\n\t\t left: 50%;\r\n\t\t top: 50%;\r\n\t\t transform: translate(-50%,-50%);\r\n\t}\r\n\t.logbt {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content:center ;\r\n\t\tflex-direction:column;\r\n\t\talign-items: center;     /* 垂直居中 */\r\n\t\t width: 100%;\r\n\t\tbackground: none;\r\n\t\tborder: none !important; \t\r\n\t}\r\n\r\n\t.logbt:after {\r\n\t\tborder: none !important;\r\n\t}\r\n   .logbt .logoimg{\r\n\t   width: 200rpx;\r\n\t   height: 200rpx;\r\n\t   display: block;\r\n   }\r\n   .logbt .wechatimg{\r\n   \t  width: 150rpx;\r\n   \t  height: 150rpx;\r\n   \t   display: block;\r\n   }\r\n   .loginTitile{ padding: 50rpx; font-size: 28rpx; color: #787878; line-height: 1.3; text-align: center;} \r\n   .loginBtn{ width: 300rpx; height: 70rpx; line-height: 70rpx; color: #fff; background:#2562a1; border-radius: 10rpx; border: none;}\r\n\timage {\r\n\t\twidth: 100rpx;\r\n\t\theight: 100rpx;\r\n\t}\r\n.mobileLogin{ background: none; color: #999; text-align: center; margin: 40rpx auto; border: none; font-size: 26rpx;}\r\n\t.landing[type=primary] {\r\n\t\theight: 84rpx;\r\n\t\tline-height: 84rpx;\r\n\t\tborder-radius: 44rpx;\r\n\t\tfont-size: 32rpx;\r\n\t\t/* background: linear-gradient(left, #86B5F4, #4790EF); */\r\n\t\tbackground-color: #ffbc32;\r\n\t}\r\n\r\n\t.login-btn {\r\n\t\tpadding: 10rpx 20rpx;\r\n\t\tmargin-top: 60rpx;\r\n\t}\r\n\r\n\t.login-function {\r\n\t\toverflow: auto;\r\n\t\tpadding: 20rpx 20rpx 30rpx 20rpx;\r\n\t}\r\n\r\n\t.login-forget {\r\n\t\tfloat: left;\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #999;\r\n\t}\r\n\r\n\t.login-register {\r\n\t\tcolor: #666;\r\n\t\tfloat: right;\r\n\t\tfont-size: 26rpx;\r\n\r\n\t}\r\n\r\n\t.login-input input {\r\n\t\tbackground: #F2F5F6;\r\n\t\tfont-size: 28rpx;\r\n\t\tpadding: 10rpx 25rpx;\r\n\t\theight: 80rpx;\r\n\t\tline-height: 80rpx;\r\n\t\tborder-radius: 40rpx;\r\n\t}\r\n\r\n\t.login-margin-b {\r\n\t\tmargin-bottom: 25rpx;\r\n\t}\r\n\r\n\t.login-input {\r\n\t\tpadding: 10rpx 20rpx;\r\n\t}\r\n\r\n\t.login-head {\r\n\t\tfont-size: 34rpx;\r\n\t\ttext-align: center;\r\n\t\tpadding: 25rpx 10rpx 55rpx 10rpx;\r\n\t}\r\n.login-head image{ width: 200rpx;}\r\n\t.login-card {\r\n\t\tbackground: #fff;\r\n\t\tborder-radius: 12rpx;\r\n\t\tpadding: 10rpx 25rpx;\r\n\t\tposition: relative;\r\n\t\tmargin-top: 120rpx;\r\n\t}\r\n\r\n\t.login-bg {\r\n\t\theight: 100%;\r\n\t\tpadding: 25rpx;\r\n\t}\r\n\t.login-head{ font-size: 90rpx;\n\tfont-weight: bold;\n\t-webkit-mask-image:-webkit-gradient(linear, 0 0, 0 bottom, from(white), to(rgba(210, 1, 160, 0.53)));}\r\n</style>\r\n","import mod from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./login.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1706369152668\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}